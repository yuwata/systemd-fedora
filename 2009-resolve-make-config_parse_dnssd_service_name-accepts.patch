From 0c949643b8f4550159b9d3ce8efbcd8e6e2263ce Mon Sep 17 00:00:00 2001
From: Yu Watanabe <watanabe.yu+github@gmail.com>
Date: Wed, 18 Nov 2020 03:23:32 +0900
Subject: [PATCH] resolve: make config_parse_dnssd_service_name() accepts an
 empty string

---
 src/resolve/resolved-conf.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/resolve/resolved-conf.c b/src/resolve/resolved-conf.c
index b454472e63..fd3c1bfecd 100644
--- a/src/resolve/resolved-conf.c
+++ b/src/resolve/resolved-conf.c
@@ -251,8 +251,8 @@ int config_parse_dnssd_service_name(
         assert(s);
 
         if (isempty(rvalue)) {
-                log_syntax(unit, LOG_ERR, filename, line, 0, "Service instance name can't be empty. Ignoring.");
-                return -EINVAL;
+                s->name_template = mfree(s->name_template);
+                return 0;
         }
 
         r = free_and_strdup(&s->name_template, rvalue);
